import{r as s,j as e,m as l,k as D,a as M,G as O,am as B,d as v,l as N}from"./index-c-vxCIvZ.js";import{f as G,g as z}from"./index-DxBJsi2t.js";import{T as R}from"./Tidio-CrK4rgmx.js";const q=({articles:i,articlesPerPage:o=3})=>{console.log(i);const[a,u]=s.useState(1),x=Math.ceil(i.length/o),f=(a-1)*o,b=i.slice(f,f+o),m=t=>{t>=1&&t<=x&&u(t)};return e.jsxs("div",{className:"max-w-5xl mx-auto p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:b.map((t,y)=>e.jsxs(l.div,{className:"bg-gray-100 dark:bg-gray-700 rounded-lg shadow-md overflow-hidden",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-200",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2 text-sm",children:t.summary})]})]},t.id||y))}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition",onClick:()=>m(a-1),disabled:a===1,children:"Previous"}),e.jsxs("span",{className:"text-gray-800 dark:text-gray-200",children:["Page ",a," of ",x]}),e.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition",onClick:()=>m(a+1),disabled:a===x,children:"Next"})]})]})},W=()=>{var U,I,C;const{userId:i}=D(),{user:o}=M(g=>g.auth),[a,u]=s.useState(null),[x,f]=s.useState(!0),[b,m]=s.useState(null),[t,y]=s.useState(!1),[w,k]=s.useState(!1),[S,p]=s.useState(null),[h,E]=s.useState([]),[$,J]=s.useState(1);s.useState(1);const[H,F]=s.useState(!0),[A,P]=s.useState(null),c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};s.useEffect(()=>{(async()=>{var d,n;try{m(null);const r=await v.get(`${N}/api/auth/user/${i}`);u(r.data);const j=localStorage.getItem("userId");j&&r.data.followers&&y(r.data.followers.includes(j))}catch(r){m(((n=(d=r.response)==null?void 0:d.data)==null?void 0:n.message)||"Failed to fetch user profile")}finally{f(!1)}})()},[i,o]),s.useEffect(()=>{i&&(async()=>{var d,n;try{F(!0),P(null);const r=await v.post(`${N}/api/article/getarticlesbyuser`,{uid:i});r.data.success&&E(r.data.articleDetails)}catch(r){P(((n=(d=r.response)==null?void 0:d.data)==null?void 0:n.message)||"Failed to fetch articles")}finally{F(!1)}})()},[i,$]);const L=async()=>{var g,d;if(!o){p("Please login to follow users");return}k(!0),p(null);try{const n={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},r=t?"unfollow":"follow",j=await v.post(`${N}/api/auth/${r}/${i}`,{},n);y(!t),u(T=>({...T,followers:j.data.followers})),p(null)}catch(n){console.error(`Error ${t?"unfollowing":"following"} user:`,n),p(((d=(g=n.response)==null?void 0:g.data)==null?void 0:d.error)||`Failed to ${t?"unfollow":"follow"} user`)}finally{k(!1)}};return x?e.jsx(O,{}):b?e.jsx("div",{className:"text-red-500 text-center mt-4",children:b}):a?e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 pt-16 pb-12",children:[e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[S&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:S}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(l.div,{initial:{scale:1},animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-24 h-24 rounded-full p-1 bg-gradient-to-br from-blue-600 to-purple-600 dark:from-yellow-400 dark:to-orange-500 shadow-lg",children:e.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-gray-900 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-yellow-400 dark:to-orange-500 text-transparent bg-clip-text",children:(U=a.username)==null?void 0:U.charAt(0).toUpperCase()})})}),e.jsxs("div",{children:[e.jsx(l.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,ease:"easeOut"},className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-yellow-400 dark:to-orange-500 text-transparent bg-clip-text",children:a.username}),a.name&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:a.name})]})]}),o&&o.userId!==i&&e.jsx(l.button,{onClick:L,disabled:w,initial:{scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},transition:{duration:.2,ease:"easeInOut"},className:`
                        flex items-center justify-center gap-2 px-4 sm:px-6 py-2 rounded-full font-semibold
                        text-sm sm:text-base min-w-[120px] sm:min-w-[140px]
                        transition-all duration-300 ease-in-out shadow-md hover:shadow-lg
                        focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800
                        ${w?"bg-gray-300 cursor-not-allowed":t?"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200 hover:bg-red-500 hover:text-white dark:hover:bg-red-600 focus:ring-red-500":"bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 focus:ring-blue-500"}
                    `,children:w?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(B,{className:"animate-spin h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Processing..."})]}):e.jsx("span",{className:"flex items-center justify-center gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"h-4 w-4 transition-colors duration-300 text-gray-400 group-hover:text-white"}),e.jsx("span",{children:"Unfollow"})]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{children:"Follow"})]})})})]}),e.jsxs(l.div,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.2}}},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.location||"Not specified"})]}),e.jsxs(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Member Since"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:new Date(a.accountCreated).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Articles Published"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.articlesPublished})]}),a.age&&e.jsxs(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Age"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[a.age," years"]})]}),e.jsxs(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Followers"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:((I=a.followers)==null?void 0:I.length)||0})]}),e.jsxs(l.div,{variants:c,whileHover:{scale:1.05},className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Following"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:((C=a.following)==null?void 0:C.length)||0})]})]})]})]}),e.jsxs("div",{className:"container mx-auto px-4 max-w-7xl mt-8",children:[e.jsx("h2",{className:"text-5xl font-extrabold text-center bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-transparent bg-clip-text mb-12",children:"Published Articles"}),H?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"})}):A?e.jsx("div",{className:"text-red-500 text-center",children:A}):(h==null?void 0:h.length)>0?e.jsxs(e.Fragment,{children:[e.jsx(q,{articles:h}),e.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-4",children:["Showing ",h.length," articles"]})]}):e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-400 mt-4",children:"No articles published yet by this user"})]})]})]}):e.jsx("div",{className:"text-center mt-4",children:"User not found"})};export{W as default};
